"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2151],{39673:function(e,r,t){t.d(r,{x:function(){return n}});var a,n,l=t(7297),s=t(85893),i=t(67294),o=t(13043),d=t.n(o),c=t(86215),u=t(11355),m=t(74685),v=t(13342),x=t(17531),y=t(51978);function g(){let e=(0,l.Z)(["\n  items-center\n  block \n  w-full \n  text-left \n  px-4 \n  py-2 \n  text-sm \n  text-textSecondary\n  hover:bg-gray-300 \n  dark:hover:bg-gray-600 \n  hover:text-gray-900\n"]);return g=function(){return e},e}(a=n||(n={})).left="left",a.right="right";let h=d().label(g()),p=e=>{let{title:r,options:t,handleSetChip:a,replace:n,isActive:l,id:o}=e,d=e=>{n?a(o,e.target.value,y.eX.replace):e.target.checked?a(o,e.target.value,y.eX.add):a(o,e.target.value,y.eX.remove)};return(0,s.jsx)(c.J,{as:"div",className:"relative inline-block text-left w-full sm:w-auto",children:e=>{let{open:a}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsxs)(c.J.Button,{className:"inline-flex items-center px-4 py-2 border-none border-gray-300 text-sm xl:text-xs 2xl:text-sm font-medium rounded-md text-black dark:text-gray-400 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-500 dark:hover:bg-opacity-10 hover:border-gray-500 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray",children:[(0,s.jsx)("span",{className:"dark:text-gray-200 dark:hover:text-gray-200 uppercase",children:r}),a?(0,s.jsx)(m.Z,{className:"h-5 w-5 ml-1"}):(0,s.jsx)(v.Z,{className:"h-5 w-5 ml-1"})]})}),(0,s.jsx)(u.u,{show:a,as:i.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,s.jsx)(c.J.Panel,{static:!0,className:"absolute z-50 max-h-52 overflow-y-auto right-0 sm:-right-16 w-56 mt-2 origin-top-right bg-white dark:bg-gray-800 divide-y divide-gray-100 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,s.jsx)("div",{className:"py-1 group",role:"none",children:t.map(e=>(0,s.jsx)("div",{role:"menuitem",children:(0,s.jsxs)(h,{className:"inline-flex items-center",children:[(0,s.jsx)(x.Z,{type:"checkbox",value:e.value,className:"border border-primary rounded h-4 w-4 dark:bg-gray-600",onChange:d,checked:l(o,e.value,n)}),(0,s.jsx)("span",{className:"ml-2 dark:text-gray-200",children:null==e?void 0:e.text})]})},null==e?void 0:e.value))})})})]})}})};r.Z=p},88171:function(e,r,t){var a=t(7297),n=t(85893),l=t(67294),s=t(30381),i=t.n(s),o=t(13043),d=t.n(o),c=t(72510),u=t(11355),m=t(74685),v=t(13342),x=t(53737),y=t(5506),g=t(27139),h=t(30619),p=t(17531),f=t(3303),b=t(41855),k=t(38719),j=t(51978),w=t(75119),N=t(91296),S=t.n(N);function Z(){let e=(0,a.Z)(["\n  flex\n  space-x-3\n  items-center\n  rounded-3xl \n  text-sm\n  py-3\n  px-4\n  m-1 \n  mr-3 \n  shadow-md\n  bg-gray-50 \n  dark:bg-gray-700\n  dark:text-gray-300\n  font-bold\n  transition-shadow\n  duration-200\n  hover:shadow-xl\n"]);return Z=function(){return e},e}let O=d().div(Z()),q=e=>{var r,t;let{title:a,searchOptions:s,Advanced:o,setTerm:d,chips:N,resetChips:Z,handleSetChip:q,isActive:C,setPage:_,children:Q,transNamespace:A,options:F}=e,{state:X,toggle:J}=(0,b.Z)(!1),[I,E]=(0,l.useState)((null==s?void 0:s.length)>0?null===(r=s[0])||void 0===r?void 0:r.value:""),U=(null===(t=null==s?void 0:s.filter(e=>(null==e?void 0:e.value)===I)[0])||void 0===t?void 0:t.text)||"",{t:Y}=(0,k.$G)(A),{t:$}=(0,k.$G)("common"),D=(0,l.useCallback)(S()(async e=>{(null==s?void 0:s.length)>0?q(I,e.target.value?e.target.value.trim():null,j.eX.replace):d(e.target.value)},500),[]);return(0,n.jsxs)(h.Z,{className:"mt-7 py-3 shadow-md animate-fade-in-down",children:[(0,n.jsxs)("div",{className:"px-4 mb-3 relative w-full mr-6 focus-within:text-opacity-70",children:[(0,n.jsx)("div",{className:"hidden sm:flex absolute inset-y-0 items-center pl-2",children:(0,n.jsx)(x.Z,{className:"w-5 h-5 dark:text-gray-200","aria-hidden":"true"})}),(null==s?void 0:s.length)>0&&(0,n.jsx)("div",{className:"sm:absolute sm:top-0 sm:left-12 pb-2 sm:pb-0 flex items-center sm:pl-2",children:(0,n.jsx)(c.v,{as:"div",className:"relative inline-block text-left w-full sm:w-auto",children:e=>{let{open:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:(0,n.jsxs)(c.v.Button,{className:"inline-flex items-center px-1 sm:px-4 py-2 border-none border-gray-300 text-xs sm:text-sm font-medium rounded-md text-black dark:text-gray-400 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-500 dark:hover:bg-opacity-10 hover:border-gray-500 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray",children:[(0,n.jsx)("span",{className:"dark:text-gray-200 dark:hover:text-gray-200 uppercase",children:U}),r?(0,n.jsx)(m.Z,{className:"h-5 w-5 ml-1"}):(0,n.jsx)(v.Z,{className:"h-5 w-5 ml-1"})]})}),(0,n.jsx)(u.u,{show:r,as:l.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,n.jsx)(c.v.Items,{static:!0,className:"absolute z-50 max-h-52 overflow-y-auto left-0 w-56 mt-2 origin-top-right bg-white dark:bg-gray-800 divide-y divide-gray-100 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,n.jsx)("div",{className:"py-1",role:"none",children:s.map(e=>(0,n.jsx)(c.v.Item,{children:(0,n.jsx)("button",{className:"block w-full text-left px-4 py-2 text-sm ".concat((null==e?void 0:e.value)===I&&"bg-gray-100 text-gray-900 dark:bg-gray-600 dark:text-gray-200"," text-textSecondary hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-700 dark:hover:white dark:text-gray-200 "),role:"menuitem",onClick:()=>{E(null==e?void 0:e.value)},children:null==e?void 0:e.text})},null==e?void 0:e.value))})})})]})}})}),(0,n.jsx)(p.Z,{className:"".concat(s?"sm:pl-[340px]":"pl-9"," text-textSecondary font-medium rounded-lg border-none"),placeholder:a,"aria-label":"Search",onChange:D,"data-test":"searchBar"})]}),(0,n.jsx)(g.iz,{}),(0,n.jsxs)("div",{className:"px-6 py-3 flex flex-wrap items-center justify-between",children:[(0,n.jsx)("div",{className:"flex flex-wrap",children:N&&Object.entries(N).map((e,r)=>{let t=Array.isArray(e[1])?e[1].length>0:e[1];if(t)return(0,n.jsxs)(O,{className:"relative",children:[(0,n.jsxs)("span",{children:[Y("filters.".concat(e[0],".label"))," :"," ",Array.isArray(e[1])?e[1].map((r,t)=>{var a;let n="string"==typeof r&&i()(r,i().ISO_8601,!0).isValid(),l=null==F?void 0:F.find(e=>e.value===r),s=n?i()(r).format("DD/MM/YYYY"):l?l.text:(0,w.gQ)(e[0],r),o=(null===(a=e[1])||void 0===a?void 0:a.length)-1===t;return"".concat(s).concat(n&&!o?" - ":n||o?"":", ")}):e[1]]}),(0,n.jsx)(y.Z,{onClick:r=>q(e[0],null,j.eX.removeAll),className:"cursor-pointer text-gray-400 w-3 h-3"})]},r)})}),(0,n.jsx)(f.Z,{className:"group rounded-3xl m-1 bg-opacity-10 uppercase font-bold",onClick:()=>Z(),children:(0,n.jsx)("span",{className:"px-6 text-primary group-hover:text-white",children:$("clear")})})]}),(0,n.jsx)(g.iz,{}),(0,n.jsxs)("div",{className:"px-6",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row sm:flex-wrap sm:items-center",children:[Q,!!o&&(0,n.jsx)("div",{className:"hidden sm:block mx-auto py-5 sm:py-0 sm:ml-auto sm:mr-0 !pt-2",children:(0,n.jsxs)(f.Z,{layout:"link",className:"!border !border-gray-300 !h-9",id:"options-menu","aria-expanded":"true","aria-haspopup":"true",onClick:J,children:[(0,n.jsx)("span",{className:"text-black dark:text-gray-200 dark:hover:text-gray-200 uppercase",children:$("advanced")}),X?(0,n.jsx)(m.Z,{className:"h-5 w-5 ml-1"}):(0,n.jsx)(v.Z,{className:"h-5 w-5 ml-1"})]})})]}),X&&(0,n.jsx)(o,{handleSetChip:q,isActive:C,setPage:_})]})]})};r.Z=q},84070:function(e,r,t){var a=t(7297),n=t(22865);function l(){let e=(0,a.Z)(["\n  mutation UpdateUser($input: UpdateUserInput!) {\n    updateUser(input: $input) {\n      id\n      businessCenterActive\n      createdAt\n      adSavedQueries {\n        name\n        query\n      }\n      shopSavedQueries {\n        name\n        query\n      }\n      productSavedQueries{\n        name\n        query\n      }\n      placementSavedQueries {\n        name\n        query\n      }\n      influencerSavedQueries {\n        name\n        query\n      }\n      pinterestSavedQueries {\n        name\n        query\n      }\n      tiktokSavedQueries {\n        name\n        query\n      }\n    }\n  }\n"]);return l=function(){return e},e}r.Z=(0,n.Ps)(l())},32405:function(e,r,t){var a=t(67294),n=t(51978),l=t(40481),s=t(50319),i=t(84070),o=t(11163),d=t(64358),c=t(5781),u=t(75119),m=t(23677),v=t(99932),x=t(30381),y=t.n(x);let g=e=>{let r=y()().subtract(e,"d").startOf("day").toISOString(),t=y()().endOf("day").toISOString();return[r,t]},h=new Map([["last_7_days",g(7)],["last_14_days",g(14)],["last_30_days",g(30)],["last_90_days",g(90)]]),p=Array.from(h.keys()),f=e=>{let r=JSON.parse(e),t=Object.entries(r),a=t.reduce((e,r)=>{let[t,a]=r;return"string"==typeof a&&p.includes(a)?{...e,[t]:h.get(a)}:{...e,[t]:a}},{});return a},b=()=>{let[e,r]=(0,a.useState)({}),{dynoProfile:x,isPaidUser:y,refetchProfile:g}=(0,l.Un)(),[h,{loading:p}]=(0,s.D)(i.Z),[b]=(0,s.D)(v.Z),[k,j]=(0,a.useState)({}),w=(0,o.useRouter)(),{toggleRegisterIsOpen:N}=(0,c.BF)(),{toggleLockPop:S}=(0,m.Zx)(),Z=r=>e[r]?e[r]:null,O=(r,t,a)=>{if(!e[r])return!1;if(a)return e[r]===t;{let a=e[r].includes(t);return a}},q=()=>{r({})},C=async function(r){var a;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.co.ad;if(!(null==x?void 0:x.id))return N();if((0,u.$Y)(null==w?void 0:w.route,null==x?void 0:x.plan))return S();if(0===Object.keys(e).length){console.log("no chips available");return}let s=(null===(a=x["".concat(l,"SavedQueries")])||void 0===a?void 0:a.map(e=>({name:e.name,query:e.query})))||[];y()&&await t.g.analytics.track(d.Ts,{type:l,name:r,query:e});let i={name:r,query:JSON.stringify(e)},o=[...s,i],c={input:{id:null==x?void 0:x.id,["".concat(l,"SavedQueries")]:o}};await h({variables:c,onCompleted:g})},_=async(e,a,n)=>{if(!(null==x?void 0:x.id))return N();if((0,u.$Y)(w.route,null==x?void 0:x.plan))return S();let l=f(e);r(l),y()&&await t.g.analytics.track(d.wN,{type:a,name:n,query:e})};return(0,a.useEffect)(()=>{var r;let t;j((r=["sort_by","smart","sortField","sortDirection"],t={...e},Object.keys(e).forEach(e=>{r.includes(e)&&delete t[e]}),t));try{b({variables:{input:{userId:x.id,platform:w.route.replace("/",""),searchQuery:JSON.stringify(e)}}})}catch(e){console.error("ERROR tracking",e)}},[e]),(0,a.useEffect)(()=>{if(JSON.stringify({})!==JSON.stringify(e)){let r=JSON.stringify(e);w.replace("".concat(w.route,"?values=").concat(encodeURIComponent(r)))}},[e]),(0,a.useEffect)(()=>{var e;if(Object.keys(w.query).length>0&&(null===(e=w.query)||void 0===e?void 0:e.values)){let e=f(w.query.values);r(e)}},[]),{chips:e,displayChips:k,handleSetChip:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.eX.add;if(!(null==x?void 0:x.id))return N();if((0,u.$Y)(w.route,null==x?void 0:x.plan))return S();switch(a){case n.eX.add:r(r=>{let a={...r},n=a[e]||[],l=[...n,t];return a[e]=l,a});break;case n.eX.replace:r(r=>{let a={...r},n=a[e];return n===t?delete a[e]:a[e]=t,a});break;case n.eX.remove:r(r=>{let a={...r},n=a[e].filter(e=>e!==t);return a[e]=n,a});break;case n.eX.removeAll:r(r=>Object.keys(r).reduce((t,a)=>(a!==e&&(t[a]=r[a]),t),{}))}},defaultValues:Z,resetChips:q,isActive:O,handleSaveQuery:C,applySaveQuery:_}};r.Z=b}}]);