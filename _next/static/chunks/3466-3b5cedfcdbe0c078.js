"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3466],{29420:function(e,t,n){var a=n(85893);let i=e=>{let{value:t}=e;return(0,a.jsx)("div",{className:"relative pt-1",children:(0,a.jsx)("div",{className:"overflow-hidden h-1 mb-4 text-xs flex rounded bg-primary bg-opacity-40",children:(0,a.jsx)("div",{style:{width:"".concat(t,"%")},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-primary transition-all"})})})};t.Z=i},83466:function(e,t,n){var a=n(7297),i=n(85893),l=n(67294),r=n(13043),s=n.n(r),o=n(65506),d=n(38719),c=n(5576),m=n(29420),u=n(3303),x=n(17531),f=n(4642),h=n(97033),p=n(27139),v=n(30619),g=n(73359),y=n(87536),j=n(9669),w=n.n(j),N=n(75119),b=n(40481),k=n(77844),_=n(64358);function C(){let e=(0,a.Z)(["\n  w-48\n  h-28 \n  "," \n  shadow-lg \n  rounded-md \n  relative z-0 \n  transition-transform \n  ease-in \n  duration-300 \n  transform \n  -translate-y-0 \n  hover:-translate-y-4\n  group\n"]);return C=function(){return e},e}function Z(){let e=(0,a.Z)(["\n  absolute \n  -top-7 \n  left-12 \n  z-10 \n  transition-transform \n  ease-in \n  duration-500 \n  transform \n  -translate-y-0 \n  group-hover:-translate-y-2\n"]);return Z=function(){return e},e}let S=s()(v.Z)(C(),e=>"last"===e.last?"bg-gradient-to-br from-primary to-yellow-200":"bg-white"),E=s().div(Z()),z=()=>{var e,t;let{dynoProfile:a,isPaidUser:r}=(0,b.Un)(),[s,v]=(0,l.useState)(!1),[j,C]=(0,l.useState)(""),[Z,z]=(0,l.useState)(""),{handleSubmit:I,control:q,formState:{errors:L},reset:R}=(0,y.cI)(),D=null==a?void 0:a.referralCoupon,{t:B}=(0,d.$G)("dashboard"),[F,T]=(0,l.useState)(!1),[$,{loading:H,error:M,data:U}]=(0,g.t)(k.Z),A=(0,l.useRef)(null);async function G(e){A.current.select(),document.execCommand("copy"),e.target.focus(),T(!0),r()&&await n.g.analytics.track(_.sq,{plan:null==a?void 0:a.plan,credits:null==a?void 0:a.credits})}let W=[{id:"1",title:B("referral_stage_1"),invite:1,icon:o.Hammer1Icon},{id:"2",title:B("referral_stage_2"),invite:4,icon:o.Hammer2Icon},{id:"3",title:B("referral_stage_3"),invite:10,icon:o.Hammer3Icon}];(0,l.useEffect)(()=>{$({variables:{code:D}})},[D]);let K=(null==U?void 0:null===(e=U.couponsByCode)||void 0===e?void 0:null===(t=e.items)||void 0===t?void 0:t.length)||0,O=async e=>{v(!0);let{email:t}=e;try{var i,l,s,o;let e=await w().post("/api/campaign",{email:t,currentUserMail:null==a?void 0:a.email,currentUserFirstName:null==a?void 0:a.firstName,referralCoupon:null==a?void 0:a.referralCoupon});if(v(!1),null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.message){R(),C(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message),r()&&await n.g.analytics.track(_.oh,{email:null==a?void 0:a.email,plan:null==a?void 0:a.plan});return}if(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.error){z(null==e?void 0:null===(o=e.data)||void 0===o?void 0:o.error);return}}catch(e){v(!1),z("failed"),console.log(e)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"animate-fade-in-down mt-4 sm:mt-8 md:mt-16 bg-primary bg-opacity-10 py-4 sm:py-5 rounded-md flex items-center dark:shadow-orange px-5",children:(0,i.jsxs)("div",{className:"ml-0 xl:ml-6 flex-1",children:[(0,i.jsx)("h2",{className:"text-xl sm:text-2xl text-center sm:text-left font-semibold text-textSecondary dark:text-gray-200",children:"".concat(B("referral_tagline")," ").concat((0,N.Tt)()?"\uD83C\uDF89":"")}),(0,i.jsx)("div",{className:"flex flex-col items-center sm:flex-row justify-around xl:justify-between 2xl:px-10 mt-6",children:W.map((e,t)=>{let n=W.length-1===t;return(0,i.jsxs)("div",{className:"text-center my-5 sm:my-0",children:[(0,i.jsx)(S,{last:n?"last":"not-last",children:(0,i.jsxs)(p.eW,{className:"h-full flex flex-col justify-between relative",children:[(null==e?void 0:e.invite)<=K&&(0,i.jsx)("span",{className:"absolute top-2 right-2 w-5 h-5",children:(0,i.jsx)(o.CheckedIcon,{})}),(0,i.jsx)("div",{children:"\xa0"}),(0,i.jsx)(E,{children:(0,i.jsx)(e.icon,{})}),(0,i.jsx)("p",{className:"text-sm font-bold ".concat(n?"text-white":"dark:text-gray-200"),children:e.title})]})}),(0,i.jsx)("p",{className:"text-base mt-1 font-medium dark:text-gray-200",children:(0,i.jsx)(d.cC,{t:B,i18nKey:"invite_n_friend",count:e.invite,children:"Invite {{count}} friend"})})]},e.id)})}),(0,i.jsxs)("div",{className:"mt-5",children:[(0,i.jsx)(m.Z,{value:10*K}),(0,i.jsx)("p",{className:"font-semibold dark:text-gray-200",children:"".concat(K,"/10 ").concat(B("referral_invited_friends")," ").concat((0,N.Tt)()?"\uD83E\uDD70":"")})]})]})}),(0,i.jsxs)("div",{className:"my-4 text-sm font-medium flex flex-col lg:flex-row lg:justify-between dark:text-gray-200",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:B("email_friend")}),(0,i.jsxs)("form",{onSubmit:I(O),children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center mt-1",children:[(0,i.jsx)("div",{className:"sm:mr-2",children:(0,i.jsx)(y.Qr,{name:"email",control:q,defaultValue:"",rules:{required:!0,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},render:e=>{let{field:t}=e;return(0,i.jsx)(x.Z,{type:"email",className:"border-gray-300 dark:border-none",valid:L.email&&("pattern"===L.email.type||"required"===L.email.type)&&!1,...t,onChange:e=>{t.onChange(e.target.value),C(""),z("")}})}})}),(0,i.jsx)("div",{className:"mt-2 sm:mt-0",children:(0,i.jsx)(u.Z,{block:!0,type:"submit",disabled:s,children:B("send_invitation",{loading:s?"ing":""})})})]}),L.email&&("pattern"===L.email.type||"required"===L.email.type)&&(0,i.jsx)(f.Z,{valid:!1,children:"pattern"===L.email.type?B("email_invalid"):"required"===L.email.type?B("email_required"):""})]}),j&&(0,i.jsx)(h.Z,{className:"my-1 inline-flex",type:"success",onClose:()=>{C("")},children:B("invitation_success")}),Z&&(0,i.jsxs)(h.Z,{className:"my-1 inline-flex",type:"danger",onClose:()=>{z("")},children:[B("invitation_failed"),(0,i.jsx)("a",{className:"underline pl-1",href:"mailto:support@minea.com",target:"_blank",children:"support"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-end items-center sm:items-end text-md flex-col xl:flex-row md:items-end",children:[(0,i.jsx)("p",{className:"pr-1 pt-2 sm:pt-0",children:B("apply_coupon")}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("p",{className:"text-primary font-semibold mr-1 text-xl",children:D}),(0,i.jsx)("button",{onClick:G,className:"hidden sm:block",children:(0,i.jsx)(o.CopyIcon,{className:"w-5 h-5"})})]})]}),(0,i.jsx)("p",{className:"pt-1 text-xs italic text-center sm:text-right",children:B("coupon_discount")}),(0,i.jsx)("textarea",{rows:1,readOnly:!0,style:{width:.1},className:"text-primary border-none focus:ring-transparent font-semibold bg-transparent h-auto resize-none text-transparent focus:outline-none active:outline-none overflow-hidden opacity-0",ref:A,value:""+B("referral_text_copy",{coupon:D})})]})]}),(0,i.jsx)(c.Z,{active:F,position:"top-right",title:B("referralCodeNotification.title"),content:B("referralCodeNotification.content")})]})};t.Z=z},5576:function(e,t,n){var a=n(7297),i=n(85893),l=n(67294),r=n(13043),s=n.n(r);function o(){let e=(0,a.Z)(["\n  absolute\n  top-32\n  max-w-sm\n  w-full\n  bg-white\n  shadow-lg\n  rounded-lg\n  pointer-events-auto\n  ring-1\n  ring-black\n  ring-opacity-5\n  overflow-hidden\n  transition\n  duration-400\n  ease-in-out\n  dark:bg-gray-600\n  "," \n"]);return o=function(){return e},e}let d=s().div(o(),e=>"true"===e.show?"right-6 opacity-100 block z-[1000]":"-right-1/2 opacity-0 hidden"),c=e=>{let{active:t,position:n,title:a,content:r,icon:s,timeOut:o=2e3}=e,[c,m]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{!0==t&&(m(t),setTimeout(()=>m(!1),o))},[t]),(0,i.jsx)(d,{show:c.toString(),children:(0,i.jsx)("div",{className:"p-4 animate-fade-in",children:(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:s||(0,i.jsx)("svg",{className:"h-6 w-6 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,i.jsxs)("div",{className:"ml-3 w-0 flex-1 pt-0.5",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",children:r})]}),(0,i.jsx)("div",{className:"ml-4 flex-shrink-0 flex",children:(0,i.jsxs)("button",{onClick:()=>m(!1),className:"bg-white dark:bg-transparent rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[(0,i.jsx)("span",{className:"sr-only",children:"Close"}),(0,i.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})})};t.Z=c},77844:function(e,t,n){var a=n(7297),i=n(22865);function l(){let e=(0,a.Z)(["\n  query GET_REFERRES($code: String!) {\n    couponsByCode(code: $code) {\n      items{\n        id\n        userEmail\n        userName\n        userId\n        at\n      }\n    }\n  }\n"]);return l=function(){return e},e}t.Z=(0,i.Ps)(l())}}]);